{% extends "base.html" %}

{% load static %}
{% load i18n %}

{% block title %}{{ titulo_pagina }}{% endblock %}

{% block extra_head %}
    <style>
        :root {
            --cor-primaria: #007bff;
            --cor-secundaria: #28a745;
        }
        .card-img-top-imovel {
            height: 200px;
            object-fit: cover;
        }
        .hero-section {
            /* Manter o estilo do Hero na página inicial */
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('https://picsum.photos/1200/400?blur=5');
            background-size: cover;
            color: white;
            padding: 5rem 0;
            text-align: center;
        }
        .btn-imobiliaria {
            background-color: var(--cor-secundaria);
            border-color: var(--cor-secundaria);
            color: white;
        }
    </style>
{% endblock %}

{% block content %}

    <div class="hero-section mb-5">
        <h1 class="display-3 fw-bold">Encontre o Seu Próximo Lar</h1>
        <p class="lead">A melhor seleção de imóveis e lotes da região.</p>
    </div>

    <h2 class="mb-4 text-center text-primary">Imóveis Disponíveis ({{ imoveis|length }})</h2>
    
    <div class="row row-cols-1 row-cols-md-3 g-4">
        
        {% for imovel in imoveis %}
            <div class="col">
                <div class="card h-100 shadow-sm">
                    
                    {% if imovel.imagem_principal %}
                    <img src="{{ imovel.imagem_principal.url }}" class="card-img-top-imovel" alt="{{ imovel.titulo }}">
                    {% else %}
                    <img src="https://picsum.photos/400/200?grayscale" class="card-img-top-imovel" alt="Imagem Padrão">
                    {% endif %}
                    
                    <div class="card-body">
                        <span class="badge {% if imovel.tipo == 'CASA' %}bg-success{% else %}bg-secondary{% endif %} mb-2">
                            {{ imovel.get_tipo_display }} 
                        </span>
                        
                        <h5 class="card-title text-truncate">{{ imovel.titulo }}</h5>
                        
                        <p class="card-text text-muted mb-1">{{ imovel.endereco }}</p>
                        
                        <p class="fs-4 fw-bold text-danger">€ {{ imovel.preco|floatformat:2 }}</p>
                        
                        <a href="{% url 'detalhe_imovel' pk=imovel.pk %}" class="btn btn-sm btn-outline-primary w-100">Ver Detalhes</a>
                    </div>
                </div>
            </div>
        {% empty %}
            <div class="col-12 text-center alert alert-warning">
                <p>Nenhum imóvel encontrado no momento.</p>
            </div>
        {% endfor %}
    </div>

{% endblock %}